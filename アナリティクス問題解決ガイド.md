# ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹å•é¡Œè§£æ±ºã‚¬ã‚¤ãƒ‰

## ğŸš¨ å•é¡Œã®ç—‡çŠ¶

ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ä»¥ä¸‹ã®é …ç›®ãŒ**0ã®ã¾ã¾**è¡¨ç¤ºã•ã‚Œã‚‹ï¼š
- âœ— ã‚¢ã‚¯ã‚»ã‚¹æ•°
- âœ— ã‚¯ãƒªãƒƒã‚¯æ•°
- âœ— ã‚¯ãƒªãƒƒã‚¯ç‡
- âœ— ç²¾èª­ç‡
- âœ— æ»åœ¨æ™‚é–“

## ğŸ¯ è§£æ±ºæ‰‹é †ï¼ˆ5åˆ†ã§å®Œäº†ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: Supabaseã§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç¢ºèª

1. [Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰](https://app.supabase.com)ã«ãƒ­ã‚°ã‚¤ãƒ³
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ
3. å·¦å´ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒSQL Editorã€ã‚’é¸æŠ
4. ä»¥ä¸‹ã®SQLã‚’å®Ÿè¡Œï¼š

```sql
-- ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
SELECT table_name 
FROM information_schema.tables 
WHERE table_name = 'analytics';
```

**çµæœãŒ0ä»¶ã®å ´åˆ** â†’ ã‚¹ãƒ†ãƒƒãƒ—2ã¸  
**çµæœãŒ1ä»¶ã®å ´åˆ** â†’ ã‚¹ãƒ†ãƒƒãƒ—3ã¸

---

### ã‚¹ãƒ†ãƒƒãƒ—2: analyticsãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ

Supabaseã®ã€ŒSQL Editorã€ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```sql
-- ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ
CREATE TABLE IF NOT EXISTS analytics (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  profile_id UUID NOT NULL,
  event_type TEXT NOT NULL CHECK (event_type IN ('view', 'click', 'scroll', 'time', 'read')),
  event_data JSONB DEFAULT '{}'::JSONB,
  content_type TEXT DEFAULT 'profile' CHECK (content_type IN ('quiz', 'profile')),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œæˆ
CREATE INDEX IF NOT EXISTS idx_analytics_profile_id ON analytics(profile_id);
CREATE INDEX IF NOT EXISTS idx_analytics_event_type ON analytics(event_type);
CREATE INDEX IF NOT EXISTS idx_analytics_created_at ON analytics(created_at DESC);
CREATE INDEX IF NOT EXISTS idx_analytics_content_type ON analytics(content_type);

-- RLSãƒãƒªã‚·ãƒ¼ã®è¨­å®š
ALTER TABLE analytics ENABLE ROW LEVEL SECURITY;

DROP POLICY IF EXISTS "Anyone can read analytics" ON analytics;
DROP POLICY IF EXISTS "Anyone can insert analytics" ON analytics;

CREATE POLICY "Anyone can read analytics"
  ON analytics FOR SELECT USING (true);

CREATE POLICY "Anyone can insert analytics"
  ON analytics FOR INSERT WITH CHECK (true);
```

âœ… å®Ÿè¡ŒãŒæˆåŠŸã—ãŸã‚‰ â†’ ã‚¹ãƒ†ãƒƒãƒ—4ã¸

---

### ã‚¹ãƒ†ãƒƒãƒ—3: content_typeã‚«ãƒ©ãƒ ã‚’ç¢ºèª

Supabaseã®ã€ŒSQL Editorã€ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```sql
-- content_typeã‚«ãƒ©ãƒ ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
SELECT column_name 
FROM information_schema.columns 
WHERE table_name = 'analytics' AND column_name = 'content_type';
```

**çµæœãŒ0ä»¶ã®å ´åˆ** â†’ ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```sql
-- content_typeã‚«ãƒ©ãƒ ã‚’è¿½åŠ 
ALTER TABLE analytics 
ADD COLUMN IF NOT EXISTS content_type TEXT DEFAULT 'profile' 
CHECK (content_type IN ('quiz', 'profile'));

CREATE INDEX IF NOT EXISTS idx_analytics_content_type ON analytics(content_type);

-- æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
UPDATE analytics 
SET content_type = 'profile' 
WHERE content_type IS NULL;
```

âœ… å®Ÿè¡ŒãŒæˆåŠŸã—ãŸã‚‰ â†’ ã‚¹ãƒ†ãƒƒãƒ—4ã¸

---

### ã‚¹ãƒ†ãƒƒãƒ—4: RLSãƒãƒªã‚·ãƒ¼ã‚’ç¢ºèª

Supabaseã®ã€ŒSQL Editorã€ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```sql
-- RLSãƒãƒªã‚·ãƒ¼ã‚’ç¢ºèª
SELECT policyname, cmd 
FROM pg_policies 
WHERE tablename = 'analytics';
```

**çµæœãŒ0ä»¶ã€ã¾ãŸã¯2ä»¶æœªæº€ã®å ´åˆ** â†’ ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```sql
-- RLSãƒãƒªã‚·ãƒ¼ã‚’å†ä½œæˆ
ALTER TABLE analytics ENABLE ROW LEVEL SECURITY;

DROP POLICY IF EXISTS "Anyone can read analytics" ON analytics;
DROP POLICY IF EXISTS "Anyone can insert analytics" ON analytics;

CREATE POLICY "Anyone can read analytics"
  ON analytics FOR SELECT USING (true);

CREATE POLICY "Anyone can insert analytics"
  ON analytics FOR INSERT WITH CHECK (true);
```

âœ… å®Ÿè¡ŒãŒæˆåŠŸã—ãŸã‚‰ â†’ ã‚¹ãƒ†ãƒƒãƒ—5ã¸

---

### ã‚¹ãƒ†ãƒƒãƒ—5: ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®`.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ã€ä»¥ä¸‹ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªï¼š

```env
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**è¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆï¼š**

1. Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ã€ŒSettingsã€â†’ã€ŒAPIã€ã‚’é–‹ã
2. ã€ŒProject URLã€ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦`NEXT_PUBLIC_SUPABASE_URL`ã«è²¼ã‚Šä»˜ã‘
3. ã€Œanon publicã€ã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦`NEXT_PUBLIC_SUPABASE_ANON_KEY`ã«è²¼ã‚Šä»˜ã‘
4. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜

âœ… è¨­å®šãŒå®Œäº†ã—ãŸã‚‰ â†’ ã‚¹ãƒ†ãƒƒãƒ—6ã¸

---

### ã‚¹ãƒ†ãƒƒãƒ—6: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢ï¼ˆCtrl+Cï¼‰
# å†èµ·å‹•
npm run dev
```

âœ… å†èµ·å‹•ãŒå®Œäº†ã—ãŸã‚‰ â†’ ã‚¹ãƒ†ãƒƒãƒ—7ã¸

---

### ã‚¹ãƒ†ãƒƒãƒ—7: å‹•ä½œç¢ºèª

1. **ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã**
   - Chromeã®å ´åˆï¼šF12ã‚­ãƒ¼
   - Edgeã®å ´åˆï¼šF12ã‚­ãƒ¼

2. **Consoleã‚¿ãƒ–ã‚’é¸æŠ**

3. **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹**
   ```
   http://localhost:3000/p/ã‚ãªãŸã®slug
   ```

4. **ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’ç¢ºèª**
   
   ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OKï¼š
   ```
   âœ… [ProfileViewTracker] Initializing for profile: xxxxx-xxxx-xxxx
   âœ… [ProfileViewTracker] View tracked: { success: true, data: [...] }
   ```

   ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆï¼š
   ```
   âŒ [Analytics] Save error: permission denied
   â†’ RLSãƒãƒªã‚·ãƒ¼ã‚’å†ç¢ºèªï¼ˆã‚¹ãƒ†ãƒƒãƒ—4ã«æˆ»ã‚‹ï¼‰
   
   âŒ [Analytics] Save error: column "content_type" does not exist
   â†’ content_typeã‚«ãƒ©ãƒ ã‚’è¿½åŠ ï¼ˆã‚¹ãƒ†ãƒƒãƒ—3ã«æˆ»ã‚‹ï¼‰
   
   âŒ Database not available
   â†’ ç’°å¢ƒå¤‰æ•°ã‚’å†ç¢ºèªï¼ˆã‚¹ãƒ†ãƒƒãƒ—5ã«æˆ»ã‚‹ï¼‰
   ```

5. **ãƒšãƒ¼ã‚¸ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«**
   
   ä»¥ä¸‹ã®ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OKï¼š
   ```
   âœ… [ProfileViewTracker] Scroll milestone tracked: 25 { success: true }
   âœ… [ProfileViewTracker] Scroll milestone tracked: 50 { success: true }
   âœ… [ProfileViewTracker] Read tracked: 50 { success: true }
   ```

6. **ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯**
   
   ä»¥ä¸‹ã®ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OKï¼š
   ```
   âœ… [LinkClick] Tracking click: https://...
   âœ… [LinkClick] Tracked: { success: true }
   ```

7. **30ç§’ä»¥ä¸Šå¾…ã¤**
   
   ä»¥ä¸‹ã®ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OKï¼š
   ```
   âœ… [ProfileViewTracker] Time tracked: 30 { success: true }
   ```

---

### ã‚¹ãƒ†ãƒƒãƒ—8: Supabaseã§ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª

Supabaseã®ã€ŒSQL Editorã€ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```sql
-- æœ€æ–°ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç¢ºèª
SELECT 
    event_type,
    event_data,
    content_type,
    created_at
FROM analytics
WHERE content_type = 'profile'
ORDER BY created_at DESC
LIMIT 10;
```

**æœŸå¾…ã•ã‚Œã‚‹çµæœï¼š**
```
event_type | event_data | content_type | created_at
-----------+------------+--------------+-------------------------
view       | {}         | profile      | 2025-12-09 12:34:56+00
scroll     | {"scrollDepth":25} | profile | 2025-12-09 12:34:58+00
scroll     | {"scrollDepth":50} | profile | 2025-12-09 12:35:00+00
read       | {"readPercentage":50} | profile | 2025-12-09 12:35:01+00
click      | {"url":"https://..."} | profile | 2025-12-09 12:35:05+00
time       | {"timeSpent":30} | profile | 2025-12-09 12:35:26+00
```

âœ… ãƒ‡ãƒ¼ã‚¿ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ãŸã‚‰ â†’ ã‚¹ãƒ†ãƒƒãƒ—9ã¸

---

### ã‚¹ãƒ†ãƒƒãƒ—9: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ç¢ºèª

1. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆ`http://localhost:3000/dashboard`ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆF5ã‚­ãƒ¼ï¼‰
3. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¸€è¦§ã‚’ç¢ºèª

**æœŸå¾…ã•ã‚Œã‚‹çµæœï¼š**
```
ã‚¢ã‚¯ã‚»ã‚¹æ•°: 1
ã‚¯ãƒªãƒƒã‚¯æ•°: 1
ã‚¯ãƒªãƒƒã‚¯ç‡: 100%
ç²¾èª­ç‡: 100%
æ»åœ¨æ™‚é–“: 30ç§’
```

âœ… æ•°å€¤ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°å®Œäº†ï¼

---

## ğŸ” ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

### Q1: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„

**åŸå› ï¼š**
- ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ï¼ˆ`/p/demo-user`ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹
- JavaScriptãŒç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•ï¼š**
- å®Ÿéš›ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ï¼ˆ`/p/ã‚ãªãŸã®slug`ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹
- ãƒ–ãƒ©ã‚¦ã‚¶ã®JavaScriptè¨­å®šã‚’ç¢ºèª

---

### Q2: `[Analytics] Invalid UUID format`ã¨è¡¨ç¤ºã•ã‚Œã‚‹

**åŸå› ï¼š**
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«IDãŒUUIDå½¢å¼ã§ã¯ãªã„

**è§£æ±ºæ–¹æ³•ï¼š**
```sql
-- Supabaseã§ç¢ºèª
SELECT id, slug FROM profiles;

-- IDãŒUUIDå½¢å¼ï¼ˆxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxï¼‰ã§ãªã„å ´åˆã€
-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å‰Šé™¤ã—ã¦æ–°ã—ãä½œæˆã™ã‚‹
```

---

### Q3: ãƒ‡ãƒ¼ã‚¿ã¯è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ãŒãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«è¡¨ç¤ºã•ã‚Œãªã„

**åŸå› ï¼š**
- `content_type`ãŒ`profile`ã§ã¯ãªã„

**è§£æ±ºæ–¹æ³•ï¼š**
```sql
-- Supabaseã§å®Ÿè¡Œ
UPDATE analytics 
SET content_type = 'profile' 
WHERE profile_id IN (SELECT id FROM profiles)
  AND (content_type IS NULL OR content_type != 'profile');
```

---

### Q4: `permission denied for table analytics`ã¨è¡¨ç¤ºã•ã‚Œã‚‹

**åŸå› ï¼š**
- RLSãƒãƒªã‚·ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•ï¼š**
```sql
-- Supabaseã§å®Ÿè¡Œ
ALTER TABLE analytics ENABLE ROW LEVEL SECURITY;

DROP POLICY IF EXISTS "Anyone can read analytics" ON analytics;
DROP POLICY IF EXISTS "Anyone can insert analytics" ON analytics;

CREATE POLICY "Anyone can read analytics"
  ON analytics FOR SELECT USING (true);

CREATE POLICY "Anyone can insert analytics"
  ON analytics FOR INSERT WITH CHECK (true);
```

---

### Q5: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®æ•°å€¤ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ›´æ–°ã•ã‚Œãªã„

**åŸå› ï¼š**
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯è‡ªå‹•æ›´æ–°ã•ã‚Œãªã„

**è§£æ±ºæ–¹æ³•ï¼š**
- ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆF5ã‚­ãƒ¼ï¼‰

---

## ğŸ“Š è¨ºæ–­ç”¨SQLã‚¯ã‚¨ãƒª

ã™ã¹ã¦ã®è¨­å®šã‚’ä¸€åº¦ã«ç¢ºèªï¼š

```sql
-- è¨ºæ–­ã‚¯ã‚¨ãƒªï¼ˆSupabaseã§å®Ÿè¡Œï¼‰
SELECT 
    CASE 
        WHEN NOT EXISTS (
            SELECT 1 FROM information_schema.tables 
            WHERE table_name = 'analytics'
        )
        THEN 'âŒ analyticsãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ã¾ã›ã‚“'
        
        WHEN NOT EXISTS (
            SELECT 1 FROM information_schema.columns 
            WHERE table_name = 'analytics' AND column_name = 'content_type'
        )
        THEN 'âŒ content_typeã‚«ãƒ©ãƒ ãŒå­˜åœ¨ã—ã¾ã›ã‚“'
        
        WHEN NOT EXISTS (
            SELECT 1 FROM pg_policies 
            WHERE tablename = 'analytics' AND policyname = 'Anyone can read analytics'
        )
        THEN 'âŒ èª­ã¿å–ã‚Šãƒãƒªã‚·ãƒ¼ãŒå­˜åœ¨ã—ã¾ã›ã‚“'
        
        WHEN NOT EXISTS (
            SELECT 1 FROM pg_policies 
            WHERE tablename = 'analytics' AND policyname = 'Anyone can insert analytics'
        )
        THEN 'âŒ æŒ¿å…¥ãƒãƒªã‚·ãƒ¼ãŒå­˜åœ¨ã—ã¾ã›ã‚“'
        
        WHEN NOT EXISTS (
            SELECT 1 FROM analytics WHERE content_type = 'profile'
        )
        THEN 'âš ï¸ ãƒ‡ãƒ¼ã‚¿ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ï¼‰'
        
        ELSE 'âœ… ã™ã¹ã¦æ­£å¸¸ã§ã™'
    END as status;
```

---

## ğŸ“ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ã™ã¹ã¦å®Œäº†ã—ãŸã‹ç¢ºèªï¼š

- [ ] analyticsãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹
- [ ] content_typeã‚«ãƒ©ãƒ ãŒå­˜åœ¨ã™ã‚‹
- [ ] RLSãƒãƒªã‚·ãƒ¼ãŒ2ã¤è¨­å®šã•ã‚Œã¦ã„ã‚‹
- [ ] ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ï¼ˆ`.env.local`ï¼‰
- [ ] ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•ã—ãŸ
- [ ] ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸ
- [ ] ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«`success: true`ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] Supabaseã«ãƒ‡ãƒ¼ã‚¿ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æ•°å€¤ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

## ğŸ†˜ ãã‚Œã§ã‚‚è§£æ±ºã—ãªã„å ´åˆ

ä»¥ä¸‹ã®æƒ…å ±ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

1. **ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°**ï¼ˆã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆï¼‰
2. **Supabaseã®ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ **ï¼ˆ`check_analytics.sql`ã®çµæœï¼‰
3. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®šçŠ¶æ³**ï¼ˆå€¤ã¯éš ã—ã¦OKï¼‰
4. **ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³**

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `ANALYTICS_SETUP.md` - åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰
- `ANALYTICS_DEBUG.md` - è©³ç´°ãªãƒ‡ãƒãƒƒã‚°æ‰‹é †
- `TEST_ANALYTICS.md` - ãƒ†ã‚¹ãƒˆæ‰‹é †
- `check_analytics.sql` - è¨ºæ–­ç”¨SQLã‚¯ã‚¨ãƒªé›†
- `supabase_analytics_setup.sql` - ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆSQL
- `migrate_analytics_add_content_type.sql` - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³SQL

---

## âœ… æˆåŠŸä¾‹

ã™ã¹ã¦æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹å ´åˆã®è¡¨ç¤ºä¾‹ï¼š

### ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°
```
[ProfileViewTracker] Initializing for profile: 12345678-1234-1234-1234-123456789abc
[ProfileViewTracker] View tracked: { success: true, data: [...] }
[ProfileViewTracker] Scroll milestone tracked: 25 { success: true }
[ProfileViewTracker] Scroll milestone tracked: 50 { success: true }
[ProfileViewTracker] Read tracked: 50 { success: true }
[LinkClick] Tracking click: https://example.com
[LinkClick] Tracked: { success: true }
[ProfileViewTracker] Time tracked: 30 { success: true }
```

### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å  â”‚ ã‚¢ã‚¯ã‚»ã‚¹ â”‚ ã‚¯ãƒªãƒƒã‚¯ â”‚ ã‚¯ãƒªãƒƒã‚¯ç‡â”‚ ç²¾èª­ç‡ â”‚ æ»åœ¨æ™‚é–“ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å±±ç”°å¤ªéƒ        â”‚    5     â”‚    3     â”‚   60%    â”‚  80%   â”‚   45ç§’   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**æœ€çµ‚æ›´æ–°ï¼š2025å¹´12æœˆ9æ—¥**

